<section class="mat-card">
  <div [ngClass]="model.isVisible !== false ? 'public' : 'hidden'" class="status-chip">
    <i class="fa-solid fa-circle fa-2xs statusdot"></i>
    {{ model.isVisible !== false ? 'Public' : 'Hidden' }}
  </div>

  <div class="account-card">
    <h1>Charity Nostr Profile</h1>
    <p class="subtitle">Connect your Nostr signer, then publish your Proof of Heart charity profile.</p>

    @if (loadingExisting) {
      <p class="subtitle">Loading existing profile dataâ€¦</p>
    } @else if (needsSignerForLoad) {
      <p class="subtitle">Could not load existing profile data yet. Connect your signer and try again.</p>
      <button type="button" (click)="loadExisting()">Connect signer & load profile</button>
    }

    <form (ngSubmit)="save()" class="account-form">
      <p class="appear-in-register">
        <label class="row-checkbox">
          <input type="checkbox" [(ngModel)]="model.isVisible" name="isVisible" />
          Appear in register
        </label>
      </p>

      <label>Charity name (fallback if kind-0 name is missing)</label>
      <input [(ngModel)]="model.charityName" name="charityName" placeholder="Your charity name" />

      <label>Mission</label>
      <textarea [(ngModel)]="model.mission" name="mission" rows="4"></textarea>

      <label>Country</label>
      <input [(ngModel)]="model.country" name="country" />

      <label>Category</label>
      <input [(ngModel)]="model.category" name="category" placeholder="e.g. food aid" />

      <label>Lightning address (optional override)</label>
      <input [(ngModel)]="model.lightningAddress" name="lightningAddress" placeholder="name@domain.com" />

      <div class="account-buttons">
        <button type="submit">Publish charity profile</button>
      </div>
    </form>
  </div>
</section>
